
{% extends "./index.html" %}
{% block title%} Dashboard | Universal Campus Smartcard Payment System {% endblock %}
{% block action%}Logout{% endblock %}

<!-- {%load static%} -->

{% block content %}

    <div class="container-fluid">
        <!-- <br> -->
        <ol class="breadcrumb mb-1">
            <li class="breadcrumb-item active"> <h5><b> Dashboard </b></h5></li>
        </ol>
        <div class="row" style="padding-bottom: 10px;">
                <div class="col-xl-6 col-md-6 col-xs-12 mb-1" >
                    <div class="card border-left-primary shadow h-100 py-1">
                        <h6 style="text-align:center; font-weight: 700; color:rgba(0, 0, 139, 0.925)">Recent Transactions per dates (Tsh)</h6>
                        <div class="card-body" style="color: #000045; padding:0.5rem;">
                            <div class="row no-gutters align-items-center">  
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/transaction_by_date/daily">
                                    <div class="text-xs font-weight-bold text-white-600 mb-1"> Today</div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">Tsh {{todayTrans}}</div> </a>
                                    <span id="tooltiptext">&nbsp;Today Transactions </span>
                                </div>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/transaction_by_date/weekly">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1">7-days ago </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">Tsh {{weeklyTrans}}</div></a>
                                    <span id="tooltiptext">&nbsp;7 days ago Transactions </span>
                                </div>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/transaction_by_date/monthly">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1"> {{month}}  </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">Tsh {{monthlyTrans}}</div></a>
                                    <span id="tooltiptext">&nbsp;This month Transactions</span>
                                </div>
                                <div id="tooltip" class="col mr-2"><a class="nav-link"  href="/transaction_by_date/yearly">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1"> {{year}} - Year</div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">Tsh {{yearlyTrans}}</div></a>
                                    <span id="tooltiptext">&nbsp;This Year Transactions </span>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
            <div class="col-xl-6 col-md-6 col-xs-12 mb-1" >
                    <div class="card border-left-primary shadow h-100 py-1">
                        <h6 style="text-align:center; font-weight: 700; color:darkblue">Total {{year}} Transaction - {{trans_all1.name}} (Tsh)</h6>
                        <div class="card-body" style="color: #dadfe4; padding:0.5rem;">
                            <div class="row no-gutters align-items-center">
                                <div id="tooltip" class="col mr-2"> <a class="nav-link"  href="/station_transaction/in">
                                    <div  class="text-xs font-weight-bold text-gray-600 mb-1">Cafeterial
                                        <span id="tooltiptext">&nbsp; Cafeterial Transactions </span>
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">
                                        Tsh {{trans_all1.amountIn}} <i class="fa fa-arrow-down fa-1x text-gray-200" aria-hidden="true"></i>
                                    </div>
                                  
                                </div></a>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_transaction/out">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1">Block1 shop
                                        <span id="tooltiptext">&nbsp; Block1 shop Transactions </span>
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">
                                        Tsh {{trans_all1.amountOut}} <i class="fa fa-arrow-down fa-1x" aria-hidden="true"></i>
                                    </div>

                                </div></a>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_transaction/out">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1">Block3 shop
                                        <span id="tooltiptext">&nbsp; Block3 shop Transactions </span>
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">
                                        Tsh {{trans_all1.amountOut}} <i class="fa fa-arrow-down fa-1x" aria-hidden="true"></i>
                                    </div>                                
                                  
                                </div></a>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_transaction/out">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1">Block6 shop
                                        <span id="tooltiptext">&nbsp; Block6 shop Transactions </span>
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">
                                        Tsh {{trans_all1.amountOut}} <i class="fa fa-arrow-down fa-1x" aria-hidden="true"></i>
                                    </div>
                                   
                                </div></a>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_transaction/out">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1">Ecowater
                                        <span id="tooltiptext">&nbsp; Ecowater Transactions </span>
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600">
                                        Tsh {{trans_all1.amountOut}} <i class="fa fa-arrow-down fa-1x" aria-hidden="true"></i>
                                    </div>
                                </div></a>
                            </div>
                        </div>
                    </div>
            </div>
        </div>

            <div class="row" style="padding-bottom: 10px;">
                <div class="col-xl-7 col-md-7 col-xs-12 mb-1" >
                    <div class="card border-left-primary shadow h-100 py-1">
                        <h6 style="text-align:center; font-weight: 700; color:darkblue">Total Registerd Cards at {{trans_all1.name}} (Tsh)</h6>
                        <div class="card-body" style="color: #000045; padding:0.5rem;">
                            <div class="row no-gutters align-items-center">  
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_topup/daily">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1"> Today</div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600"> {{todayTrans1}}</div> </a>
                                    <span id="tooltiptext">&nbsp; Registered Today </span>
                                </div>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_topup/weekly">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1">7-days ago </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600"> {{weeklyTrans1}}</div></a>
                                    <span id="tooltiptext">&nbsp; Registered 7 days ago</span>
                                </div>
                                <div id="tooltip" class="col mr-2"><a class="nav-link" href="/station_topup/monthly">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1"> {{month}}  </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600"> {{monthlyTrans1}}</div></a>
                                    <span id="tooltiptext">&nbsp; Registered this monthly </span>
                                </div>
                                <div id="tooltip" class="col mr-2"><a class="nav-link"  href="/station_topup/yearly">
                                    <div class="text-xs font-weight-bold text-gray-600 mb-1"> {{year}} - Year</div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-600"> {{yearlyTrans1}}</div></a>
                                    <span id="tooltiptext">&nbsp; Registered this Year </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-5 col-md-5 col-xs-12 mb-1" > 
                        
                </div>
        </div>


        <div class="row" style="padding-bottom: 10px;">
            <div class="col-xl-4">
                <div class="card mb-1">
                    <div class="card-header">
                        <i class="fas fa-chart-bar mr-1"></i>
                        Recent Transactions
                    </div>
                <div class="card-body" style="padding: 1px;">
                    <canvas id="myChart"></canvas>
                </div>
            </div>
            </div>
            <div class="col-xl-4">
                <div class="card mb-1">
                    <div class="card-header">
                    <i class="fas fa-chart-bar mr-1"></i>
                    {{year}} & Total Earning per Business
                </div>
                <div class="card-body" style="padding: 1px;">
                    <canvas id="myChart1"></canvas>
                </div>
            </div>
            </div>
            <div class="col-xl-4">
                <div class="card mb-1">
                    <div class="card-header">
                        <i class="fas fa-chart-bar mr-1"></i>
                        {{year}} Registered {{trans_all1.name}}
                    </div>
                    <div class="card-body" style="padding: 1px;">
                        <canvas id="myChart2"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

    {% endblock %}
    {% block js %}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    
    <script>
        var config = {
            type: 'bar',
            data: {
              datasets: [{
                data: {{ data|safe }},
                backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)'],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)'],
                borderWidth: 2,
                label: 'Transactions (Tsh)'
              }],
              labels: {{ label|safe }}
            },
            options: {
              responsive: true
            }
          };

          var config1 = {
            type: 'line',
            data: {
              datasets: [{
                data: {{ data1|safe }},
                backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)'],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)'],
                borderWidth: 2,
                label: 'Transactions (Tsh)'
              }],
              labels: {{ label1|safe }}
            },
            options: {
              responsive: true
            }
          };

          var config2 = {
            type: 'line',
            data: {
              datasets: [{
                data: {{ data2|safe }},
                backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)'],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)'],
                borderWidth: 2,
                label: 'Transactions (Tsh)'
              }],
              labels: {{ label2|safe }}
            },
            options: {
              responsive: true
            }
          };
      
          window.onload = function() {
            var ctx = document.getElementById('myChart').getContext('2d');
            window.myPie = new Chart(ctx, config);
            var ctx = document.getElementById('myChart1').getContext('2d');
            window.myPie = new Chart(ctx, config1);
            var ctx = document.getElementById('myChart2').getContext('2d');
            window.myPie = new Chart(ctx, config2);
          };
    </script>
    {% endblock %}